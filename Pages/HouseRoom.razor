@page "/House/{RoomURL}"
@inject HttpClient Http
@inject GameState GameState
@implements IDisposable

@if (room != null)
{
    <h1>@room.Name</h1>
}




@functions{

    [Parameter]
    private string roomURL { get; set; }
    private Room room;

    protected override void OnParametersSet()
    {
        SetRoom(roomURL);
    }
    private void SetRoom(string url)
    {
        room = Program.roomManager.GetRoomByURL(url);
    }
    protected override void OnInit()
    {
        GameState.StateChanged += OnGameStateChanged;
        this.StateHasChanged();
    }
    void IDisposable.Dispose()
    {
        GameState.StateChanged -= OnGameStateChanged;
    }
    void OnGameStateChanged(object sender, EventArgs e) => StateHasChanged();
}